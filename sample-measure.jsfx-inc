import basic-util.jsfx-inc

@init
function resetSample() (
  this.count = 0;
  this.average = 1;
);

function hasSignalToLearn(sampleLevel) (
  sampleLevel > 0.0001;
);

function learnNewLevel(sampleLevel) (
    hasSignalToLearn(sampleLevel) ? (
        this.average = (this.average * this.count + sampleLevel) / (this.count + 1);
        this.count += 1;
    );
);